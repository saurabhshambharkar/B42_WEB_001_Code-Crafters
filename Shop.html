<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        h1 {
            text-align: center;
        }
        .product {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }
        @media screen and (max-width:650px) {
            .product{
                grid-template-columns: repeat(2,1fr);
            }
            
        }

        @media screen and (max-width:480px) {
            .product{
                grid-template-columns: repeat(1,1fr);
            }
            
        }
        .card {
            background: #fff;
            padding: 1rem;
            text-align: justify;
            box-shadow: rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, 
                        rgba(0, 0, 0, 0.3) 0px 30px 60px -30px, 
                        rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset;
            
            border-radius: 10px;
        }
        .addcartbtn {
            padding: 10px 15px;
            color: white;
            font-weight: 700;
            background-color: rgb(28, 28, 177);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.3s;
        }
        .addcartbtn:hover {
            background-color: blue;
        }
        img {
            width: 100%;
            height: auto;
            border-radius: 5px;
        }
        .cart-link {
            display: block;
            text-align: right;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

    <a href="cart.html" class="cart-link">ðŸ›’ View Cart</a>

    <h1>Men's Wear</h1>
    <div class="mensclothes product"></div>

    <h1>Women's Wear</h1>
    <div class="womensclothes product"></div>

    <script>
        let mensdiv = document.querySelector(".mensclothes");
        let womendiv = document.querySelector(".womensclothes");

        async function displaydata() {
            try {
                let mensres = await fetch("https://movies-ad738-default-rtdb.firebaseio.com/menscloths.json");
                let mensdata = await mensres.json();
                let mensclothesdata = Object.entries(mensdata).slice(1); 

                mensclothesdata.forEach(([id, data]) => {
                    let { title, description, image } = data;
                    let card = document.createElement("div");
                    card.classList.add("card");

                    let addcart = document.createElement("button");
                    addcart.innerText = "Add to Cart";
                    addcart.classList.add("addcartbtn");
                    addcart.dataset.id = id;
                    addcart.dataset.title = title;
                    addcart.dataset.price = 35; // Dummy price
                    addcart.dataset.image = image;

                    card.innerHTML = `<img src="${image}" alt="product img">
                                      <h3>${title}</h3>
                                      <p>${description}</p>`;
                    card.appendChild(addcart);
                    mensdiv.appendChild(card);

                    addcart.addEventListener("click", () => addToCart(id, title, 35, image));
                });

                let womensres = await fetch("https://modesensewomenclothing-default-rtdb.firebaseio.com/women.json");
                let womensdata = await womensres.json();
                let womensclothesdata = Object.entries(womensdata).slice(1, 7);

                womensclothesdata.forEach(([id, data]) => {
                    let { title, description, image } = data;
                    let card = document.createElement("div");
                    card.classList.add("card");

                    let addcart = document.createElement("button");
                    addcart.innerText = "Add to Cart";
                    addcart.classList.add("addcartbtn");
                    addcart.dataset.id = id;
                    addcart.dataset.title = title;
                    addcart.dataset.price = 40; // Dummy price
                    addcart.dataset.image = image;

                    card.innerHTML = `<img src="${image}" alt="product img">
                                      <h3>${title}</h3>
                                      <p>${description}</p>`;
                    card.appendChild(addcart);
                    womendiv.appendChild(card);

                    addcart.addEventListener("click", () => addToCart(id, title, 40, image));
                });
            } catch (err) {
                console.log(err);
            }
        }

        function addToCart(id, title, price, image) {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];

            let existingItem = cart.find(item => item.id === id);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ id, title, price, image, quantity: 1 });
            }

            localStorage.setItem("cart", JSON.stringify(cart));

            window.location.href = './cart.html';
        }

        displaydata();
    </script>

</body>
</html>
